---
import { getCollection } from "astro:content";
import Shell from "../components/shell.astro";

import { storytelling } from "../data/site-nav-data.json";
const { socials, nav } = storytelling;

const timeline = await getCollection("storytelling-timeline");
timeline.sort((a,b) => b.data.date > a.data.date ? 1 : -1);
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/png" href="/favicon.png" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <link rel="stylesheet" href="/styles.css" />
    <link rel="stylesheet" href="icofont.min.css" />
    <title>Lee-Orr</title>
  </head>
  <Shell area="storytelling" socials={socials} nav={nav}>
    <div
      class="w-screen h-full relative"
    >
    <div class="absolute top-0 left-0 bottom-0 right-0 overflow-y-auto">
    <div class="flex flex-col justify-start items-start gap-10 w-full p-20">
      <div class="w-10 h-10"></div>
      {
        timeline.map(({ slug, data, body }) => {
          let random = Math.random();
          let position =
            random < 0.3 ? "start" : random < 0.7 ? "center" : "end";

          let class_string = `bg-primary-200 flex-col w-[60%] p-5 flex gap-5 self-${position}`;

          let img = data.image ? (<img src={data.image} alt={data.image_alt ?? data.title}/>) : (<></>);

          return (
            <div class={class_string}>
              <h2 class="text-2xl text-text font-bold underline-offset-8 underline">{data.title}</h2>
              {img}
              <div class="text-md text-text-800">{data.summary}</div>
            </div>
          );
        })
      }
      </div>
    </div>
    </div>
  </Shell>


</html>
